{"version":3,"file":"draggable.umd.min.9.js","mappings":"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","sources":["webpack://draggable/./src/components/draggable/draggable-contianer.vue","webpack://draggable/src/components/draggable/draggable-contianer.vue","webpack://draggable/./src/components/draggable/draggable-contianer.vue?77fc","webpack://draggable/./src/components/draggable/draggable-contianer.vue?4352","webpack://draggable/./src/components/draggable/store/cache.js","webpack://draggable/./src/components/draggable/store/container.js","webpack://draggable/./src/components/draggable/store/store-draggable.js","webpack://draggable/./src/utils/index.js"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{directives:[{name:\"resize\",rawName:\"v-resize\",value:(_vm.onResize),expression:\"onResize\"}],staticClass:\"draggable-container\"},[(_vm.container_id && _vm.init_done)?_vm._t(\"default\"):_vm._e()],2)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div v-resize=\"onResize\" class=\"draggable-container\">\n    <slot v-if=\"container_id && init_done\" />\n  </div>\n</template>\n\n<script>\nimport { getUUIDv4 } from \"@/utils\";\nimport resize from \"vue-resize-directive\";\nimport {\n  removeDraggableContainer,\n  setDraggableContainer,\n  setParentProps,\n  getStoreDraggable,\n  setCardComponent\n} from \"./store/store-draggable\";\nexport default {\n  props: {\n    cardComponent: { type: String, default: \"map-card\" },\n    cardPopupComponent: { type: String },\n    cardSidebarComponent: { type: String },\n    cardBottomComponent: { type: String }\n  },\n  directives: {\n    resize\n  },\n  components: {},\n  data: () => ({\n    container_id: `draggable-container-${getUUIDv4()}`,\n    init_done: false\n  }),\n  watch: {\n    cardComponent() {\n      this.onUpdateCardComponent();\n    },\n    cardPopupComponent() {\n      this.onUpdateCardComponent();\n    },\n    cardSidebarComponent() {\n      this.onUpdateCardComponent();\n    },\n    cardBottomComponent() {\n      this.onUpdateCardComponent();\n    }\n  },\n  mounted() {\n    setDraggableContainer(this.container_id);\n    this.$nextTick(() => {\n      this.onResize();\n      window.addEventListener(\"resize\", this.onResize);\n      this.init_done = true;\n      this.$emit(\"init-done\", { id: this.container_id });\n    });\n    this.onUpdateCardComponent();\n  },\n  beforeDestroy() {\n    removeDraggableContainer(this.container_id);\n    window.removeEventListener(\"resize\", this.onResize);\n  },\n\n  computed: {\n    store() {\n      return getStoreDraggable(this.container_id);\n    }\n  },\n  provide() {\n    return {\n      containerId: this.container_id\n    };\n  },\n  methods: {\n    onUpdateCardComponent() {\n      setCardComponent(this.container_id, {\n        cardComponent: this.cardComponent,\n        cardPopupComponent: this.cardPopupComponent,\n        cardSidebarComponent: this.cardBottomComponent,\n        cardBottomComponent: this.cardBottomComponent\n      });\n    },\n    onResize() {\n      setParentProps(this.container_id, {\n        width: this.$el.clientWidth,\n        height: this.$el.clientHeight\n      });\n    }\n  }\n};\n</script>\n\n<style scoped>\n.draggable-container {\n  height: 100%;\n  width: 100%;\n}\n</style>\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-124.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./draggable-contianer.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-124.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./draggable-contianer.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./draggable-contianer.vue?vue&type=template&id=9041080a&scoped=true&\"\nimport script from \"./draggable-contianer.vue?vue&type=script&lang=js&\"\nexport * from \"./draggable-contianer.vue?vue&type=script&lang=js&\"\nimport style0 from \"./draggable-contianer.vue?vue&type=style&index=0&id=9041080a&prod&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"9041080a\",\n  null\n  \n)\n\nexport default component.exports","export const ACTION_CACHE = {};\n","import { ACTION_CACHE } from \"./cache\";\nimport Vue from \"vue\";\n\nconst store = new Vue.observable({});\n\nexport const setDraggableContainer = (id) => {\n  ACTION_CACHE[id] = {};\n  Vue.set(store, id, {\n    popup_ids: [],\n    popup_ids_show: [],\n    sidebar_ids: [],\n    sidebar_ids_show: [],\n    mobile_ids: [],\n    mobile_ids_show: [],\n    parent: { width: 0, height: 0 },\n    isMobile: false,\n    cardComponent: \"map-card\",\n    cardPopupComponent: \"map-card\",\n    cardSidebarComponent: \"map-card\",\n    cardBottomComponent: \"map-card\"\n  });\n};\nexport const removeDraggableContainer = (id) => {\n  delete ACTION_CACHE[id];\n  Vue.delete(store, id);\n};\nexport const getStoreDraggable = (id) => store[id] || {};\n\nexport const getParentProps = (id) => getStoreDraggable(id).parent;\nexport const getParentWidth = (id) => getStoreDraggable(id).parent.width;\nexport const getParentHeight = (id) => getStoreDraggable(id).parent.height;\n\nexport const setParentProps = (id, { width, height }) => {\n  if (!id) return;\n  getStoreDraggable(id).parent.width = width;\n  getStoreDraggable(id).parent.height = height;\n  setIsMobile(id, width && width <= 600);\n};\n\nexport const isMobile = (id) => getStoreDraggable(id).isMobile;\nexport const setIsMobile = (id, value) => {\n  getStoreDraggable(id).isMobile = value;\n};\nexport const setCardComponent = (\n  id,\n  {\n    cardComponent,\n    cardPopupComponent,\n    cardSidebarComponent,\n    cardBottomComponent\n  }\n) => {\n  let store = getStoreDraggable(id);\n  store.cardComponent = cardComponent;\n  store.cardPopupComponent = cardPopupComponent;\n  store.cardSidebarComponent = cardSidebarComponent;\n  store.cardBottomComponent = cardBottomComponent;\n};\nexport const getCardPopupComponent = (id) => {\n  let store = getStoreDraggable(id);\n  return store.cardPopupComponent || store.cardComponent;\n};\n\nexport const getCardSidebarComponent = (id) => {\n  let store = getStoreDraggable(id);\n  return store.cardSidebarComponent || store.cardComponent;\n};\n\nexport const getCardBottomComponent = (id) => {\n  let store = getStoreDraggable(id);\n  return store.cardBottomComponent || store.cardComponent;\n};\n","import { getStoreDraggable, isMobile } from \"./container\";\n\nimport { ACTION_CACHE } from \"./cache\";\n\nexport * from \"./container\";\n\nexport const checkIsLast = (id, popup_id, items) => {\n  if (!id || !popup_id) return;\n  if (items.length < 1) return false;\n  return items[items.length - 1] == popup_id;\n};\nexport const checkIsFirst = (id, popup_id, items) => {\n  if (!id || !popup_id) return;\n  if (items.length < 1) return false;\n  return items[0] == popup_id;\n};\n\nexport const getPopupIdsShow = (id) => {\n  let p_store = getStoreDraggable(id);\n  if (isMobile(id)) {\n    return p_store.mobie_ids;\n  }\n  return p_store.popup_ids_show;\n};\n\nexport const getSidebarIdsShow = (id, position) => {\n  let p_store = getStoreDraggable(id);\n  if (isMobile(id)) {\n    return p_store.mobie_ids;\n  }\n  return p_store.sidebar_ids_show.filter(\n    (sidebar_id) =>\n      ACTION_CACHE[id] &&\n      ACTION_CACHE[id][sidebar_id] &&\n      ACTION_CACHE[id][sidebar_id][\"position\"] == position\n  );\n};\n\nexport const getMobileIdsShow = (id) => {\n  let p_store = getStoreDraggable(id);\n  return p_store.mobile_ids_show;\n};\n","export const getUUIDv4 = function () {\n  return ([1e7] + -1e3 + -4e3 + -8e3 + -1e11).replace(/[018]/g, (c) =>\n    (\n      c ^\n      (crypto.getRandomValues(new Uint8Array(1))[0] & (15 >> (c / 4)))\n    ).toString(16)\n  );\n};\n"],"names":["render","_vm","this","_c","_self","directives","name","rawName","value","onResize","expression","staticClass","container_id","init_done","_t","_e","staticRenderFns","props","cardComponent","type","default","cardPopupComponent","cardSidebarComponent","cardBottomComponent","resize","components","data","watch","mounted","setDraggableContainer","window","id","beforeDestroy","removeDraggableContainer","computed","store","provide","containerId","methods","onUpdateCardComponent","setCardComponent","setParentProps","width","height","component","ACTION_CACHE","Vue","popup_ids","popup_ids_show","sidebar_ids","sidebar_ids_show","mobile_ids","mobile_ids_show","parent","isMobile","getStoreDraggable","getParentWidth","getParentHeight","setIsMobile","getCardPopupComponent","getCardSidebarComponent","getCardBottomComponent","checkIsLast","popup_id","items","length","checkIsFirst","getPopupIdsShow","p_store","mobie_ids","getSidebarIdsShow","position","filter","sidebar_id","getMobileIdsShow","getUUIDv4","replace","c","crypto","getRandomValues","Uint8Array","toString"],"sourceRoot":""}